function ChurchController(e,n,t,o,a,i,r,c){var s=function(){var e=this instanceof s;return e===!1?new s:(this.number="",this.city="",this.district="",this.street="",this.hasStates=!1,this.hasCities=!1,void(this.cities=[]))};n.church={addresses:[]},n.contacts={},n.sendContacts=!1,n.churches={all:[],list:[],paginated:[]},n.pagination={perPage:20,currentPage:1,totalPages:0,totalItems:0,pageNumbers:[]},n.interaction={visibleColumns:{address:!0,city:!0,updated_at:!0},columnsToFilter:[],filterTerm:"",openComments:[]},n.countries=[],n.states=[],n.address={country:"",state:""},n.controls={select2:null};var u={country:"Brazil"};e.post=function(n,o,i,r,c){c=c?c:e.getHeaders(),a.debug&&console.log(c),t.post(n,o,c).then(function(e){a.debug&&console.log(e),"function"==typeof i&&i(e)},function(e){a.debug&&console.log(e),"function"==typeof r&&r(e)})},e.getHeaders=function(){return{headers:{"Content-Type":"application/json"}}},e.put=function(n,o,a,i,r){r=r?r:e.getHeaders(),t.put(n,o,r).then(function(e){"function"==typeof a&&a(e)},function(e){"function"==typeof i&&i(e)})},e["delete"]=function(n,o,a,i){i=i?i:e.getHeaders(),t["delete"](n,i).then(function(e){"function"==typeof o&&o(e)},function(e){"function"==typeof a&&a(e)})},e.get=function(n,o,a,i){i=i?i:e.getHeaders(),t.get(n,i).then(function(e){"function"==typeof o&&o(e)},function(e){"function"==typeof a&&a(e)})},n.churchEdit=function(e){angular.copy(e)},n.churchSave=function(e){var o=angular.copy(e),c=t.post,s=i.path+"churches/";return void 0==o.name?(r.warning("Informe o nome da igreja","AVISO!"),!1):o.addresses.length<1?(r.warning("Informe pelo menos um endereço","AVISO!"),!1):(void 0!=o.id&&(c.$http.put,s+=o.id),a.debug&&(console.log(o),console.log(s)),a.debug&&(console.log("######## DADOS PARA SEREM SALVOS"),console.log(o)),void c(s,o).then(function(e){n.church={addresses:[]},$('.nav-tabs a[href="#tabIgreja"]').tab("show"),jQuery("#modalChurches").modal("hide"),n.addAddess(),r.success("Igreja Salva com sucesso! - Aguardando Aprovação","SUCESSO!")},function(e){a.debug&&console.log(e.data);var n=[];angular.forEach(e.data.message,function(e,t){n.push(t)}),r.error("Houve uma falha ao tentar salvar a igreja, verifique se preencheu todos os dados do(s) endereço(s).","ERRO!")}))},n.setPaginationData=function(e){var t=_.chunk(e,n.pagination.perPage);n.churches.paginated=t,n.churches.list=t[0],n.pagination.currentPage=1,n.pagination.totalItems=e.length,n.pagination.totalPages=Math.ceil(e.length/n.pagination.perPage),n.pagination.pageNumbers=_.range(1,n.pagination.totalPages+1),a.debug&&console.log(n.pagination.pageNumbers)},n.page=function(e){n.pagination.currentPage=e,n.churches.list=n.churches.paginated[e-1]},n.next=function(){return n.pagination.currentPage==n.pagination.totalPages?!1:(n.pagination.currentPage=n.pagination.currentPage+1,void(n.churches.list=n.churches.paginated[n.pagination.currentPage-1]))},n.previous=function(){return 1==n.pagination.currentPage?!1:(n.pagination.currentPage=n.pagination.currentPage-1,void(n.churches.list=n.churches.paginated[n.pagination.currentPage-1]))},n.doResetAll=function(){n.interaction.visibleColumns={address:!0,city:!0,updated_at:!0},n.interaction.columnsToFilter=[],n.interaction.filterTerm="",n.interaction.openComments=[],n.setPaginationData(n.churches.all),c.reset("churches")},n.doOpenComments=function(e){var t=n.interaction.openComments.indexOf(e);t>-1?n.interaction.openComments.splice(t,1):n.interaction.openComments.push(e)},n.openAllComments=function(){n.interaction.openComments.length>0?n.interaction.openComments=[]:n.interaction.openComments=_.pluck(n.churches.list,"id")};var l=function(){e.get(i.path+"addresses",function(e){a.debug&&console.log(e.data),n.churches.all=e.data,n.setPaginationData(e.data)})};n.closeModal=function(){jQuery("#modalChurches").modal("hide"),jQuery("#modalContacts").modal("hide")},n.churchOrder=function(e){var t=c.get("churches",e);n.churches.all=o("orderBy")(n.churches.all,t),n.setPaginationData(n.churches.all)},n.churchByOrder=function(e){return c.byOrder("churches",e)},n.controls.select2=jQuery("#columnsToFilterSelect").select2({placeholder:"Selecionar uma ou mais colunas para filtrar!"}).on("change",function(){n.interaction.columnsToFilter=jQuery("#columnsToFilterSelect").val()});var d=function(t,o,i,r){t=t||u.country,a.debug&&console.log(a.path+"countries/countries.json"),e.get(a.path+"countries/countries.json",function(e){n.countries=e.data,void 0!=r&&(r.country=angular.copy(u.country)),n.getState(u.country,o,i,r),a.debug&&console.log(e.data)})};n.getState=function(t,o,i,r){a.debug&&console.log(t);var c=normalize(angular.copy(t));c=c.replace(" ","-").toLowerCase(),e.get(a.path+"countries/states/"+c+".json",function(e){n.states=e.data,r.hasStates=!0,"undefined"!=typeof o&&(void 0!=r&&(r.state=angular.copy(o)),n.getCities(o,i,r))},function(e){r.hasStates=!1})},n.getCities=function(n,t,o){return a.debug&&console.log(n),void 0==n||"string"!=typeof n?(o.hasCities=!1,o.city="",!1):"Brazil"!=o.country?(o.hasCities=!1,o.city="",!1):(a.debug&&(console.log("##### PATH #####"),console.log(a.path+"countries/cities/brazil.json")),void e.get(a.path+"countries/cities/brazil.json",function(e){var i=e.data;i=i.filter(function(e){return e.code==n?e:void 0}),a.debug&&(console.log("### CITIES ###"),console.log(i),console.log(i[0].cities)),o.cities=[];var r=[];angular.forEach(i[0].cities,function(e){r.push({name:e})}),a.debug&&(console.log("### CITIES ###"),console.log(r)),o.cities=r,o.city="",o.hasCities=!0,"undefined"!=typeof t&&(o.city=angular.copy(t))},function(e){o.hasCities=!1}))},n.getCep=function(e,n){var o=this.address;o.numberId="number"+n;var i=e.replace(/[^0-9]+/g,"");void 0!=i&&""!=i&&8==i.length&&t.get("https://viacep.com.br/ws/"+i+"/json/").then(function(e){var n=e.data;void 0==n.erro&&(a.debug&&console.log(n),d("Brazil","BR-"+n.uf,n.localidade,o),o.district=n.bairro,o.city=n.localidade,o.street=n.logradouro,angular.element("#"+o.numberId).trigger("focus"))},function(e){"undefined"!=typeof error&&error(e.data)})},n.addAddess=function(){n.church.addresses.push(angular.copy(new s))},n.showTab=function(e){$('.nav-tabs a[href="#tabEndereco_'+e+'"]').tab("show")},n.addAddess(),d(u.country,void 0,void 0,n.church.addresses[0]),n.deleteAddress=function(e){var t=n.church.addresses.indexOf(e);n.church.addresses.splice(t,1)},n.sendContact=function(t){return void 0==t.name||""==t.name?void r.warning("Informe seu nome","AVISO!"):void 0==t.email||""==t.email?void r.warning("Informe seu email","AVISO!"):void 0==t.comments||""==t.comments?void r.warning("Diga alguma coisa","AVISO!"):(n.sendContacts=!0,void e.post(i.path+"contacts",t,function(e){n.contacts={},jQuery("#modalContacts").modal("hide"),r.success("Sua mensagem foi enviada com sucesso!","Obrigado!"),n.sendContacts=!1},function(e){n.sendContacts=!1,jQuery("#modalContacts").modal("hide"),r.error("Houve uma falha no envio de sua mensgaem, por favor verifique os dados informados"),a.debug&&console.log(e)}))},n.edit=function(e){r.warning("Funcionalidade de edição ainda não implementada.","NÃO DISPONÍVEL!")},l()}angular.module("appIgrejas",["flashMessage","OrderService"]).constant("APP",{name:"As Igrejas Version Beta",debug:!1,views:"/views/",path:"/"}).constant("API",{path:"//api.asigrejas.com/v1/"}).filter("dateFormat",function(){return function(e,n){return void 0!=n?moment(e).format(n):moment(e).format("DD/MM/YYYY")}}).controller("ChurchController",["$rootScope","$scope","$http","$filter","APP","API","flash","OrderService",ChurchController]);var normalize=function(){var e={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ý":"Y","ß":"s","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","ý":"y","ÿ":"y","Ā":"A","ā":"a","Ă":"A","ă":"a","Ą":"A","ą":"a","Ć":"C","ć":"c","Ĉ":"C","ĉ":"c","Ċ":"C","ċ":"c","Č":"C","č":"c","Ď":"D","ď":"d","Đ":"D","đ":"d","Ē":"E","ē":"e","Ĕ":"E","ĕ":"e","Ė":"E","ė":"e","Ę":"E","ę":"e","Ě":"E","ě":"e","Ĝ":"G","ĝ":"g","Ğ":"G","ğ":"g","Ġ":"G","ġ":"g","Ģ":"G","ģ":"g","Ĥ":"H","ĥ":"h","Ħ":"H","ħ":"h","Ĩ":"I","ĩ":"i","Ī":"I","ī":"i","Ĭ":"I","ĭ":"i","Į":"I","į":"i","İ":"I","ı":"i","Ĳ":"IJ","ĳ":"ij","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","Ĺ":"L","ĺ":"l","Ļ":"L","ļ":"l","Ľ":"L","ľ":"l","Ŀ":"L","ŀ":"l","Ł":"l","ł":"l","Ń":"N","ń":"n","Ņ":"N","ņ":"n","Ň":"N","ň":"n","ŉ":"n","Ō":"O","ō":"o","Ŏ":"O","ŏ":"o","Ő":"O","ő":"o","Œ":"OE","œ":"oe","Ŕ":"R","ŕ":"r","Ŗ":"R","ŗ":"r","Ř":"R","ř":"r","Ś":"S","ś":"s","Ŝ":"S","ŝ":"s","Ş":"S","ş":"s","Š":"S","š":"s","Ţ":"T","ţ":"t","Ť":"T","ť":"t","Ŧ":"T","ŧ":"t","Ũ":"U","ũ":"u","Ū":"U","ū":"u","Ŭ":"U","ŭ":"u","Ů":"U","ů":"u","Ű":"U","ű":"u","Ų":"U","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","ź":"z","Ż":"Z","ż":"z","Ž":"Z","ž":"z","ſ":"s","ƒ":"f","Ơ":"O","ơ":"o","Ư":"U","ư":"u","Ǎ":"A","ǎ":"a","Ǐ":"I","ǐ":"i","Ǒ":"O","ǒ":"o","Ǔ":"U","ǔ":"u","Ǖ":"U","ǖ":"u","Ǘ":"U","ǘ":"u","Ǚ":"U","ǚ":"u","Ǜ":"U","ǜ":"u","Ǻ":"A","ǻ":"a","Ǽ":"AE","ǽ":"ae","Ǿ":"O","ǿ":"o"},n=/\W/g,t=function(n){return e[n]||n};return function(e){return e.replace(n,t)}}();